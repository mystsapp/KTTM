@model BaoCaoViewModel

<div class="row form-group">
    <div class="col-xs-12 col-md-12 ">
        <div class="rounded p-2 text-sm" style="padding-bottom:5px; background-color: aliceblue;" id="search">
            <div class=" row form-group text-sm">

                <div class="col-md-7">
                    <label>Phiếu tạm ứng trước ngày</label>
                </div>

                <div class="col-md-5">
                    <input class="form-control form-control-sm maskInput" id="txtTuNgay" value="@ViewBag.searchFromDate" />

                </div>
            </div>

            <div class=" row text-sm">
                <div class="col-md-7">
                    <label>Thanh toán chậm nhất là ngày</label>
                </div>

                <div class="col-md-5">
                    <input class="form-control form-control-sm maskInput" id="txtDenNgay" value="@ViewBag.searchToDate" />

                </div>
            </div>

        </div>
    </div>
</div>

<div style="overflow-x:auto; overflow-y:auto; height: 300px">
    <table class="table mytable text-nowrap text-sm" id="khachHangTbl">
        <thead>
            <tr class="table-info">

                @*<th>Số TT</th>
                <th>Ngày</th>
                <th>Mã KH có</th>
                <th>Tên Người Thanh Toán</th>
                <th>Phiếu thu/chi</th>*@

            </tr>
        </thead>
        <tbody>
            @if (Model.PhongBans != null)
            {
                @foreach (var item in Model.PhongBans.ToList())
                {

                    <tr class="khachhangs-cursor-pointer " data-id="@item.Id">

                        <td class="tdVal_PhongBan" data-id="@item.Id">@Html.DisplayFor(m => item.TenBoPhan)</td>
                        @*<td class="tdVal_TT621" data-id="@item.Id">@Html.Raw(item.NgayCT.Value.ToString("dd/MM/yyyy"))</td>
                        <td class="tdVal_TT621" data-id="@item.Id">@Html.DisplayFor(m => item.MaKhCo)</td>
                        <td class="tdVal_TT621" data-id="@item.Id">@Html.DisplayFor(m => item.TamUng.KVCTPCT.KVPCT.LapPhieu)</td>
                        <td class="tdVal_TT621" data-id="@item.Id">@Html.DisplayFor(m => item.PhieuTC)</td>*@

                    </tr>

                }
            }
        </tbody>
    </table>

</div>

<form asp-action="InChungTuGhiSoExcel" id="frm_InChungTuGhiSoExcel" method="post">
    <input type="hidden" id="hidTuNgay" name="tuNgay" />
    <input type="hidden" id="hidDenNgay" name="denNgay" />

    <input type="hidden" id="hidId_TT" name="id_TT" />
    <input type="hidden" id="hidSoCT_TT" name="soCT_TT" />
    <input type="hidden" id="hidNgayCT_TT" name="ngayCT_TT" />
    <input type="hidden" id="hidMaKhCo_TT" name="maKhCo_TT" />
    <input type="hidden" id="hidPhieuTC_TT" name="phieuTC_TT" />
</form>

<script>
    $(".maskInput").mask("99/99/9999");

    // enter for search
    shortcut.add("Enter", function () {

        $('#btnInChungTuSearch').click();
    });

    $('#btnInChungTuSearch').off('click').on('click', function () {
        tuNgay = $('#txtTuNgay').val();
        denNgay = $('#txtDenNgay').val();

        InChungTungGhiSo(tuNgay, denNgay); // _TopMenu
    })

    // btnInChungTu
    $('#btnInChungTu').off('click').on('click', function () {

        $('#frm_InChungTuGhiSoExcel').submit();
    })
    $('.khachhangs-cursor-pointer').click(function () {

        // giu trang thai
        if ($(this).hasClass("hoverClass"))
            $(this).removeClass("hoverClass");
        else {
            $('.khachhangs-cursor-pointer').removeClass("hoverClass");
            $(this).addClass("hoverClass");
        }

        tuNgay = $('#txtTuNgay').val();
        denNgay = $('#txtDenNgay').val();

        var id_TT = $(this).data('id');
        var soCT_TT = $(this).children().eq(0).html();
        var ngayCT_TT = $(this).children().eq(1).html();
        var maKhCo_TT = $(this).children().eq(2).html();
        var phieuTC_TT = $(this).children().eq(3).html();

        $('#hidTuNgay').val(tuNgay);
        $('#hidDenNgay').val(denNgay);

        $('#hidId_TT').val(id_TT);
        $('#hidSoCT_TT').val(soCT_TT);
        $('#hidNgayCT_TT').val(ngayCT_TT);
        $('#hidMaKhCo_TT').val(maKhCo_TT);
        $('#hidPhieuTC_TT').val(phieuTC_TT);

        //var code = $(this).children().eq(0).html();
        //var name = $(this).children().eq(1).html();


    })
</script>
